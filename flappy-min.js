window.onload=series;function series(){createMultiBar();setbarposition();setbarHeight()}var numBar=15;var flyrun=true;var droprun=true;var gameon=false;var topbar=document.getElementById("flag-top");var bottombar=document.getElementById("flag-bottom");var isReset=false;function play(){if(isReset==true){resetGame();isReset=false}gameon=true;var a=document.getElementsByClassName("mask");var b=document.getElementsByClassName("btn");var c=document.getElementById("start");a[0].style.display="none";b[0].style.display="none";c.style.display="none";moveBar();dropDown()}var elem=document.getElementById("box");elem.style.top="200px";var ypos=parseInt(elem.style.top);var xpos=parseInt(elem.style.left);function fly(){if(gameon==false){elem.style.top="200px";return false}if(event.keyCode==32){if(elem.fly){clearTimeout(elem.fly)}var a=function(){var c=parseInt(elem.style.top);c-=2.2;elem.style.top=c+"px";if(c<20){clearTimeout(elem.fly);elem.style.top="0px"}isOver()};for(var b=0;b<40;b++){elem.fly=setTimeout(a,b*3)}if(flyrun==false){return false;clearTimeout(elem.fly)}dropDown()}}function dropDown(){if(droprun==false){return false;clearTimeout(elem.drop)}if(elem.drop){clearTimeout(elem.drop)}var a=parseInt(elem.style.top);if(a<=550){a+=3}elem.style.top=a+"px";elem.drop=setTimeout("dropDown()",10);if(a>=551){return false}isOver()}function createBar(){var b=document.createElement("div");b.className="tbar";var a=document.createElement("div");a.className="bbar";topbar.appendChild(b);bottombar.appendChild(a)}function createMultiBar(){for(var a=0;a<numBar;a++){createBar()}}var max=240;var min=100;var flagheight=300;function setbarHeight(){var b=document.getElementsByClassName("tbar");var f=document.getElementsByClassName("bbar");for(var d=0;d<b.length;d++){var j=Math.random();if(j>=0.5){var k=j}else{k=0.5}b[d].style.height=min+k*150+"px";var c=parseInt(b[d].style.height);var e=c-max-10;b[d].style.top=e+"px"}for(var d=0;d<f.length;d++){var h=Math.random();if(h>=0.5){var g=h}else{g=0.5}f[d].style.height=min+g*150+"px";var c=parseInt(f[d].style.height);var a=flagheight-c;f[d].style.top=a+"px"}}var topbarmix=document.getElementsByClassName("tbar");var botbarmix=document.getElementsByClassName("bbar");function setbarposition(){var d=document.getElementsByClassName("tbar");var c=document.getElementsByClassName("bbar");for(var b=0;b<c.length;b++){var a=b*200;c[b].style.left=a+"px"}for(var b=0;b<d.length;b++){var a=b*200;d[b].style.left=a+"px"}}function xleft(c){var b=c.getBoundingClientRect().left;return(b)}function xright(c){var b=c.getBoundingClientRect().right;return(b)}function ytop(c){var b=c.getBoundingClientRect().top;return(b)}function ybottom(c){var b=c.getBoundingClientRect().bottom;return(b)}var flagtop=document.getElementById("flag-top");flagtop.style.left="200px";var flagbottom=document.getElementById("flag-bottom");flagbottom.style.left="200px";function moveBar(){var a=parseInt(flagtop.style.left);var b=parseInt(flagbottom.style.left);if(a>-5000){a--}if(b>-5000){b--}flagtop.style.left=a+"px";flagbottom.style.left=b+"px";move=setTimeout("moveBar()",10);hideBar()}function hideBar(){for(var c=0;c<topbarmix.length;c++){var a=xleft(topbarmix[c]);if(a<=-50){topbarmix[c].className="thidden";score()}}for(var b=0;b<botbarmix.length;b++){var d=xleft(botbarmix[b]);if(d<=-50){botbarmix[b].className="bhidden"}}}function isOver(){var c=xleft(elem);var e=xright(elem);var b=ytop(elem);var h=ybottom(elem);var a=document.getElementsByClassName("tbar")[0];var j=xleft(a);var f=ybottom(a);var g=document.getElementsByClassName("bbar")[0];var i=xleft(g);var d=ytop(g);if(b<=f&&e==j){stopAnimition()}if(e>=j&&b<=f){stopAnimition()}if(h>=d&&e==i){stopAnimition()}if(e>=i&&h>=d){stopAnimition()}if(b==548){stopAnimition()}}var scoretext=document.getElementById("score");function score(){countmix=document.getElementsByClassName("thidden");var a=countmix.length;scoretext.innerHTML=a}function stopAnimition(){clearTimeout(move);flyrun=false;droprun=false;gameon=false;isReset=true;var a=document.getElementsByClassName("mask");var b=document.getElementsByClassName("btn");var c=document.getElementById("start");a[0].style.display="block";b[0].style.display="block";c.style.display="inline";resetBackgroud()}function resetBackgroud(){var b=document.getElementById("flag-top");var a=document.getElementById("flag-bottom");b.style.left="200px";a.style.left="200px";for(var c=hideTBar.length-1;c>=0;c--){hideTBar[c].className="tbar"}for(var c=hideBBar.length-1;c>=0;c--){hideBBar[c].className="bbar"}}var hideTBar=document.getElementsByClassName("thidden");var hideBBar=document.getElementsByClassName("bhidden");function resetGame(){var a=document.getElementById("box");a.style.top="200px";setbarHeight();setbarposition();flyrun=true;droprun=true;scoretext.innerHTML="0"};